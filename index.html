<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Tienda Iglesia</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <h1>Tienda Iglesia</h1>
        <nav>
            <button class="active" data-view="ventas">Ventas</button>
            <button data-view="deudas">Deudas</button>
            <button data-view="reportes">Reportes</button>
            <button data-view="historial">Historial</button>
            <button data-view="inventario">Inventario</button>
        </nav>
    </header>

    <main>
        <!-- VISTA DE REPORTES -->
        <div id="view-reportes" class="view">
            <div class="card total-sales-card">
                <div class="total-section">
                    <h3>Ganancia Mes</h3>
                    <div id="monthly-profit-amount" class="total-amount profit-amount">$0</div>
                </div>
                <div class="total-section">
                    <h3>Ventas Mes</h3>
                    <div id="monthly-total-amount" class="total-amount">$0</div>
                </div>
                <div class="total-section">
                    <h3>Contado Mes</h3>
                    <div id="monthly-cash-amount" class="total-amount cash-amount">$0</div>
                </div>
                <div class="total-section">
                    <h3>Crédito Mes</h3>
                    <div id="monthly-credit-amount" class="total-amount credit-amount">$0</div>
                </div>
            </div>
            <div class="summary-grid">
                <div class="summary-card">
                    <h3>Producto Estrella</h3>
                    <div id="summary-best-product" class="value">--</div>
                </div>
                <div class="summary-card">
                    <h3>Top Deudores</h3>
                    <ul id="summary-top-debtors">
                        <li>No hay deudas</li>
                    </ul>
                </div>
                <div class="summary-card">
                    <h3>Últimos Pagos</h3>
                    <ul id="summary-recent-payments">
                        <li>No hay pagos</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- VISTA DE VENTAS -->
        <div id="view-ventas" class="view active">
            <div class="card top-bar-container">
                <div class="form-group">
                    <label for="fecha-seleccionada">Fecha</label>
                    <input type="date" id="fecha-seleccionada">
                </div>
                <div class="form-group">
                    <label for="daily-expense-amount">Inversión del Día ($)</label>
                    <input type="number" id="daily-expense-amount" placeholder="Ej: 50000">
                </div>
            </div>
            <div class="card">
                <h2>Ventas del Día (<span id="daily-totals-summary">Total: $0</span>)</h2>
                <div id="lista-transacciones" class="item-list"></div>
            </div>
        </div>

        <!-- VISTA DE DEUDAS -->
        <div id="view-deudas" class="view">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                    <h2>Saldos</h2>
                    <div class="debt-toggle">
                        <span>Mostrar clientes al día</span>
                        <label class="switch">
                            <input type="checkbox" id="debt-toggle-switch">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div id="lista-deudores" class="item-list"></div>
            </div>
        </div>

        <!-- VISTA DE INVENTARIO -->
        <div id="view-inventario" class="view">
            <div class="card">
                <h2>Gestión de Productos</h2>
                <div class="inventory-row inventory-header">
                    <div class="details">Producto</div>
                    <div class="amount">Precio</div>
                    <div class="item-actions">Acciones</div>
                </div>
                <div id="lista-inventario" class="item-list"></div>
                <div class="form-actions" style="justify-content: center; margin-top: 1rem;">
                    <button id="btn-abrir-modal-producto" class="btn-primary">Añadir Nuevo Producto</button>
                </div>
            </div>
        </div>
        
        <!-- VISTA DE HISTORIAL -->
        <div id="view-historial" class="view">
            <div class="card">
                <h2>Historial de Ventas</h2>
                <div class="history-filters">
                    <div class="filter-btn-group">
                        <button class="filter-btn active" data-filter="all">Ver Todo</button>
                        <button class="filter-btn" data-filter="month">Mes</button>
                        <button class="filter-btn" data-filter="day">Día</button>
                    </div>
                    <input type="month" id="history-month-input" class="filter-input hidden">
                    <input type="date" id="history-day-input" class="filter-input hidden">
                </div>
                <div id="history-total" style="text-align: right; font-weight: bold; margin-bottom: 1rem;"></div>
            </div>
            <div class="card">
                <div id="lista-historial" class="item-list"></div>
            </div>
        </div>
    </main>

    <button class="fab" id="btn-nueva-venta" class="hidden">+</button>

    <!-- MODALES -->
    <div id="modal-container"></div>

    <!-- CAMBIO: script ahora es de tipo "module" y apunta a main.js -->
    <script type="module" src="js/main.js"></script>
</body>
</html>